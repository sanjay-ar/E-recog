{"ast":null,"code":"var _jsxFileName = \"/Users/sanjayar/Desktop/moody-main copy 2/src/pages/meeting/Meeting.tsx\",\n    _s = $RefreshSig$();\n\nimport { Box, Button, Container, Paper, Tab, Typography, useTheme, makeStyles } from \"@material-ui/core\";\nimport { ArrowBackIos, PlayArrow, Stop } from \"@material-ui/icons\";\nimport { Alert, AlertTitle, TabContext, TabList, TabPanel } from \"@material-ui/lab\";\nimport { useCallback, useRef, useState } from \"react\";\nimport { Link as RouterLink, useParams } from \"react-router-dom\";\nimport Loader from \"../../components/Loader\";\nimport Page from \"../../components/Page\";\nimport { startMeeting, stopMeeting } from \"../../meetings/meetingsSlice\";\nimport { useAppDispatch } from \"../../reduxHooks\";\nimport AudienceEmotionBarometer from \"./AudienceEmotionBarometer\";\nimport AudienceEmotionRollercoaster from \"./AudienceEmotionRollercoaster\";\nimport EmotionRadar from \"./EmotionRadar\";\nimport ExportButton from \"./ExportButton\";\nimport FeedbackLinkButton from \"./FeedbackLinkButton\";\nimport { useEmotionDetection, useFetchMeeting, useMeetingInformation, useScreenCapturingIfMeetingIsRunning } from \"./hooks\";\nimport Ratings from \"./Ratings\";\nimport StartScreenCapturingDialog from \"./StartScreenCapturingDialog\";\nimport VoiceCaptureControls from \"./VoiceCaptureControls\";\nimport VoiceVisualization from \"./VoiceVisualization\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  videoBackground: {\n    position: \"fixed\",\n    right: 0,\n    bottom: 0,\n    width: \"100%\",\n    height: \"100%\",\n    zIndex: -1,\n    objectFit: \"cover\",\n    opacity: 0.8\n  },\n  overlay: {\n    position: \"fixed\",\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: \"rgba(0, 0, 0, 0.4)\",\n    zIndex: -1\n  },\n  content: {\n    position: \"relative\",\n    zIndex: 1,\n    color: \"white\",\n    paddingTop: theme.spacing(4),\n    paddingBottom: theme.spacing(4)\n  }\n}));\nexport default function Meeting() {\n  _s();\n\n  var _videoRef$current;\n\n  const {\n    id\n  } = useParams();\n  const [notFound] = useFetchMeeting(id);\n  const [meetingLoading, meetingRunning, meetingEnded, meetingName] = useMeetingInformation(id);\n  const dispatch = useAppDispatch();\n  const handleStartMeeting = useCallback(async () => {\n    dispatch(startMeeting());\n  }, [dispatch]);\n  const handleStopMeeting = useCallback(() => {\n    dispatch(stopMeeting());\n  }, [dispatch]);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const handleStartScreenCapturing = useScreenCapturingIfMeetingIsRunning(videoRef, handleStopMeeting);\n  useEmotionDetection(videoRef, canvasRef);\n  const [audioStream, setAudioStream] = useState(undefined);\n  const [tabValue, setTabValue] = useState(\"1\");\n\n  const handleTabChange = (event, newValue) => {\n    setTabValue(newValue);\n  };\n\n  const theme = useTheme();\n  const classes = useStyles();\n  return /*#__PURE__*/_jsxDEV(Page, {\n    children: [/*#__PURE__*/_jsxDEV(\"video\", {\n      autoPlay: true,\n      loop: true,\n      muted: true,\n      className: classes.videoBackground,\n      playsInline: true,\n      children: /*#__PURE__*/_jsxDEV(\"source\", {\n        src: \"/videos/background.mp4\",\n        type: \"video/mp4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.overlay\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      className: classes.content,\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        color: \"primary\",\n        startIcon: /*#__PURE__*/_jsxDEV(ArrowBackIos, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 22\n        }, this),\n        component: RouterLink,\n        to: \"/meetings\",\n        children: \"Back\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this), meetingLoading ? /*#__PURE__*/_jsxDEV(Box, {\n        children: /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }, this) : notFound ? /*#__PURE__*/_jsxDEV(Box, {\n        mt: 2,\n        children: /*#__PURE__*/_jsxDEV(Alert, {\n          severity: \"warning\",\n          children: [/*#__PURE__*/_jsxDEV(AlertTitle, {\n            children: \"Oh no! Meeting not found \\uD83D\\uDE29\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body1\",\n            children: \"This meeting does not exist or has been deleted.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h1\",\n          children: meetingName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 13\n        }, this), meetingEnded ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            children: \"This meeting has ended and cannot be started again. \\uD83D\\uDC4F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(FeedbackLinkButton, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(ExportButton, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(Box, {\n          display: \"flex\",\n          alignItems: \"center\",\n          children: [/*#__PURE__*/_jsxDEV(StartScreenCapturingDialog, {\n            handleStartScreenCapturing: handleStartScreenCapturing\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            color: meetingRunning ? \"secondary\" : \"primary\",\n            variant: \"contained\",\n            size: \"large\",\n            startIcon: meetingRunning ? /*#__PURE__*/_jsxDEV(Stop, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 47\n            }, this) : /*#__PURE__*/_jsxDEV(PlayArrow, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 58\n            }, this),\n            onClick: meetingRunning ? handleStopMeeting : handleStartMeeting,\n            children: [meetingRunning ? \"Stop\" : \"Start\", \" the meeting\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 17\n          }, this), meetingRunning && /*#__PURE__*/_jsxDEV(Box, {\n            ml: 3,\n            children: /*#__PURE__*/_jsxDEV(VoiceCaptureControls, {\n              handleMediaStream: setAudioStream\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          mt: 2,\n          children: /*#__PURE__*/_jsxDEV(TabContext, {\n            value: tabValue,\n            children: [/*#__PURE__*/_jsxDEV(Paper, {\n              square: true,\n              children: /*#__PURE__*/_jsxDEV(TabList, {\n                onChange: handleTabChange,\n                children: [/*#__PURE__*/_jsxDEV(Tab, {\n                  label: \"Statistics\",\n                  value: \"1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Tab, {\n                  label: \"Faces\",\n                  value: \"2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Tab, {\n                  label: \"Voice\",\n                  value: \"3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 180,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Tab, {\n                  label: \"Ratings\",\n                  value: \"4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 181,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n              value: \"1\",\n              style: {\n                padding: theme.spacing(2, 0)\n              },\n              children: [/*#__PURE__*/_jsxDEV(Box, {\n                display: \"inline-block\",\n                mr: 2,\n                children: meetingEnded ? /*#__PURE__*/_jsxDEV(EmotionRadar, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 187,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(AudienceEmotionBarometer, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                display: \"inline-block\",\n                children: /*#__PURE__*/_jsxDEV(AudienceEmotionRollercoaster, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 193,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n              value: \"2\",\n              style: {\n                padding: theme.spacing(2, 0)\n              },\n              children: !meetingRunning ? /*#__PURE__*/_jsxDEV(Alert, {\n                severity: \"info\",\n                children: /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body1\",\n                  children: \"This visualization is only available if the meeting is running.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 199,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [!((_videoRef$current = videoRef.current) === null || _videoRef$current === void 0 ? void 0 : _videoRef$current.srcObject) && /*#__PURE__*/_jsxDEV(Alert, {\n                  severity: \"info\",\n                  children: /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body1\",\n                    children: \"There is no active screen capturing. Did you allow the application access to your screen? Reload the page to try again.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 208,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n                  ref: canvasRef\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 215,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n              value: \"3\",\n              style: {\n                padding: theme.spacing(2, 0)\n              },\n              children: !meetingRunning ? /*#__PURE__*/_jsxDEV(Alert, {\n                severity: \"info\",\n                children: /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body1\",\n                  children: \"This visualization is only available if the meeting is running.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 222,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: audioStream instanceof MediaStream ? /*#__PURE__*/_jsxDEV(VoiceVisualization, {\n                  audioStream: audioStream\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 230,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(Alert, {\n                  severity: \"info\",\n                  children: /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body1\",\n                    children: \"This visualization is only available if the voice tracking is active. Enable it using the switch above.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 233,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 232,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n              value: \"4\",\n              style: {\n                padding: theme.spacing(2, 0)\n              },\n              children: /*#__PURE__*/_jsxDEV(Ratings, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Meeting, \"hYbJmk9tfbbIM4DUiof09vpajv8=\", false, function () {\n  return [useParams, useFetchMeeting, useMeetingInformation, useAppDispatch, useScreenCapturingIfMeetingIsRunning, useEmotionDetection, useTheme, useStyles];\n});\n\n_c = Meeting;\n\nvar _c;\n\n$RefreshReg$(_c, \"Meeting\");","map":{"version":3,"sources":["/Users/sanjayar/Desktop/moody-main copy 2/src/pages/meeting/Meeting.tsx"],"names":["Box","Button","Container","Paper","Tab","Typography","useTheme","makeStyles","ArrowBackIos","PlayArrow","Stop","Alert","AlertTitle","TabContext","TabList","TabPanel","useCallback","useRef","useState","Link","RouterLink","useParams","Loader","Page","startMeeting","stopMeeting","useAppDispatch","AudienceEmotionBarometer","AudienceEmotionRollercoaster","EmotionRadar","ExportButton","FeedbackLinkButton","useEmotionDetection","useFetchMeeting","useMeetingInformation","useScreenCapturingIfMeetingIsRunning","Ratings","StartScreenCapturingDialog","VoiceCaptureControls","VoiceVisualization","useStyles","theme","videoBackground","position","right","bottom","width","height","zIndex","objectFit","opacity","overlay","top","left","backgroundColor","content","color","paddingTop","spacing","paddingBottom","Meeting","id","notFound","meetingLoading","meetingRunning","meetingEnded","meetingName","dispatch","handleStartMeeting","handleStopMeeting","videoRef","canvasRef","handleStartScreenCapturing","audioStream","setAudioStream","undefined","tabValue","setTabValue","handleTabChange","event","newValue","classes","padding","current","srcObject","MediaStream"],"mappings":"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","sourcesContent":["import {\n  Box,\n  Button,\n  Container,\n  Paper,\n  Tab,\n  Typography,\n  useTheme,\n  makeStyles,\n} from \"@material-ui/core\";\nimport { ArrowBackIos, PlayArrow, Stop } from \"@material-ui/icons\";\nimport {\n  Alert,\n  AlertTitle,\n  TabContext,\n  TabList,\n  TabPanel,\n} from \"@material-ui/lab\";\nimport { useCallback, useRef, useState } from \"react\";\nimport { Link as RouterLink, useParams } from \"react-router-dom\";\nimport Loader from \"../../components/Loader\";\nimport Page from \"../../components/Page\";\nimport { startMeeting, stopMeeting } from \"../../meetings/meetingsSlice\";\nimport { useAppDispatch } from \"../../reduxHooks\";\nimport AudienceEmotionBarometer from \"./AudienceEmotionBarometer\";\nimport AudienceEmotionRollercoaster from \"./AudienceEmotionRollercoaster\";\nimport EmotionRadar from \"./EmotionRadar\";\nimport ExportButton from \"./ExportButton\";\nimport FeedbackLinkButton from \"./FeedbackLinkButton\";\nimport {\n  useEmotionDetection,\n  useFetchMeeting,\n  useMeetingInformation,\n  useScreenCapturingIfMeetingIsRunning,\n} from \"./hooks\";\nimport Ratings from \"./Ratings\";\nimport StartScreenCapturingDialog from \"./StartScreenCapturingDialog\";\nimport VoiceCaptureControls from \"./VoiceCaptureControls\";\nimport VoiceVisualization from \"./VoiceVisualization\";\n\nconst useStyles = makeStyles((theme) => ({\n  videoBackground: {\n    position: \"fixed\",\n    right: 0,\n    bottom: 0,\n    width: \"100%\",\n    height: \"100%\",\n    zIndex: -1,\n    objectFit: \"cover\",\n    opacity: 0.8,\n  },\n  overlay: {\n    position: \"fixed\",\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: \"rgba(0, 0, 0, 0.4)\",\n    zIndex: -1,\n  },\n  content: {\n    position: \"relative\",\n    zIndex: 1,\n    color: \"white\",\n    paddingTop: theme.spacing(4),\n    paddingBottom: theme.spacing(4),\n  },\n}));\n\nexport default function Meeting(): JSX.Element {\n  const { id } = useParams() as any;\n  const [notFound] = useFetchMeeting(id);\n  const [meetingLoading, meetingRunning, meetingEnded, meetingName] =\n    useMeetingInformation(id);\n\n  const dispatch = useAppDispatch();\n\n  const handleStartMeeting = useCallback(async () => {\n    dispatch(startMeeting());\n  }, [dispatch]);\n\n  const handleStopMeeting = useCallback(() => {\n    dispatch(stopMeeting());\n  }, [dispatch]);\n\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const handleStartScreenCapturing = useScreenCapturingIfMeetingIsRunning(\n    videoRef,\n    handleStopMeeting\n  );\n  useEmotionDetection(videoRef, canvasRef);\n\n  const [audioStream, setAudioStream] = useState<MediaStream | undefined>(\n    undefined\n  );\n\n  const [tabValue, setTabValue] = useState<string>(\"1\");\n  const handleTabChange = (event: React.ChangeEvent<{}>, newValue: string) => {\n    setTabValue(newValue);\n  };\n\n  const theme = useTheme();\n  const classes = useStyles();\n\n  return (\n    <Page>\n      <video\n        autoPlay\n        loop\n        muted\n        className={classes.videoBackground}\n        playsInline\n      >\n        <source src=\"/videos/background.mp4\" type=\"video/mp4\" />\n      </video>\n      <div className={classes.overlay} />\n      <Container className={classes.content}>\n        <Button\n          color=\"primary\"\n          startIcon={<ArrowBackIos />}\n          component={RouterLink}\n          to=\"/meetings\"\n        >\n          Back\n        </Button>\n        {meetingLoading ? (\n          <Box>\n            <Loader />\n          </Box>\n        ) : notFound ? (\n          <Box mt={2}>\n            <Alert severity=\"warning\">\n              <AlertTitle>Oh no! Meeting not found üò©</AlertTitle>\n              <Typography variant=\"body1\">\n                This meeting does not exist or has been deleted.\n              </Typography>\n            </Alert>\n          </Box>\n        ) : (\n          <>\n            <Typography variant=\"h1\">{meetingName}</Typography>\n            {meetingEnded ? (\n              <>\n                <Typography variant=\"h5\">\n                  This meeting has ended and cannot be started again. üëè\n                </Typography>\n                <FeedbackLinkButton />\n                <ExportButton />\n              </>\n            ) : (\n              <Box display=\"flex\" alignItems=\"center\">\n                <StartScreenCapturingDialog\n                  handleStartScreenCapturing={handleStartScreenCapturing}\n                />\n                <Button\n                  color={meetingRunning ? \"secondary\" : \"primary\"}\n                  variant=\"contained\"\n                  size=\"large\"\n                  startIcon={meetingRunning ? <Stop /> : <PlayArrow />}\n                  onClick={\n                    meetingRunning ? handleStopMeeting : handleStartMeeting\n                  }\n                >\n                  {meetingRunning ? \"Stop\" : \"Start\"} the meeting\n                </Button>\n                {meetingRunning && (\n                  <Box ml={3}>\n                    <VoiceCaptureControls handleMediaStream={setAudioStream} />\n                  </Box>\n                )}\n              </Box>\n            )}\n            <Box mt={2}>\n              <TabContext value={tabValue}>\n                <Paper square>\n                  <TabList onChange={handleTabChange}>\n                    <Tab label=\"Statistics\" value=\"1\" />\n                    <Tab label=\"Faces\" value=\"2\" />\n                    <Tab label=\"Voice\" value=\"3\" />\n                    <Tab label=\"Ratings\" value=\"4\" />\n                  </TabList>\n                </Paper>\n                <TabPanel value=\"1\" style={{ padding: theme.spacing(2, 0) }}>\n                  <Box display=\"inline-block\" mr={2}>\n                    {meetingEnded ? (\n                      <EmotionRadar />\n                    ) : (\n                      <AudienceEmotionBarometer />\n                    )}\n                  </Box>\n                  <Box display=\"inline-block\">\n                    <AudienceEmotionRollercoaster />\n                  </Box>\n                </TabPanel>\n                <TabPanel value=\"2\" style={{ padding: theme.spacing(2, 0) }}>\n                  {!meetingRunning ? (\n                    <Alert severity=\"info\">\n                      <Typography variant=\"body1\">\n                        This visualization is only available if the meeting is\n                        running.\n                      </Typography>\n                    </Alert>\n                  ) : (\n                    <>\n                      {!videoRef.current?.srcObject && (\n                        <Alert severity=\"info\">\n                          <Typography variant=\"body1\">\n                            There is no active screen capturing. Did you allow\n                            the application access to your screen? Reload the\n                            page to try again.\n                          </Typography>\n                        </Alert>\n                      )}\n                      <canvas ref={canvasRef} />\n                    </>\n                  )}\n                </TabPanel>\n                <TabPanel value=\"3\" style={{ padding: theme.spacing(2, 0) }}>\n                  {!meetingRunning ? (\n                    <Alert severity=\"info\">\n                      <Typography variant=\"body1\">\n                        This visualization is only available if the meeting is\n                        running.\n                      </Typography>\n                    </Alert>\n                  ) : (\n                    <>\n                      {audioStream instanceof MediaStream ? (\n                        <VoiceVisualization audioStream={audioStream} />\n                      ) : (\n                        <Alert severity=\"info\">\n                          <Typography variant=\"body1\">\n                            This visualization is only available if the voice\n                            tracking is active. Enable it using the switch\n                            above.\n                          </Typography>\n                        </Alert>\n                      )}\n                    </>\n                  )}\n                </TabPanel>\n                <TabPanel value=\"4\" style={{ padding: theme.spacing(2, 0) }}>\n                  <Ratings />\n                </TabPanel>\n              </TabContext>\n            </Box>\n          </>\n        )}\n      </Container>\n    </Page>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}