{"ast":null,"code":"var _jsxFileName = \"/Users/sanjayar/Desktop/moody-main copy 2/src/pages/VoiceEmotionDebugging.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { Box, Button, ButtonGroup, Container, Typography, useTheme } from \"@material-ui/core\";\nimport { useEffect, useRef, useState } from \"react\";\nimport Meyda from \"meyda\";\nimport Plot from \"react-plotly.js\";\nimport { rmsNormalize, softmax } from \"../utils\";\nimport Loader from \"../components/Loader\";\nimport max from \"lodash-es/max\";\nimport Page from \"../components/Page\"; // onnxruntime-web is included in public/index.html as <script>\n// .wasm files are currently not compatible with the create-react-app webpack config\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst InferenceSession = window.ort.InferenceSession;\nconst Tensor = window.ort.Tensor;\nconst VOICE_EMOTIONS = [\"neutral\", \"happy\", \"sad\", \"angry\", \"fearful\", \"disgust\", \"surprised\"];\n\nconst useAudioAnalyzer = (audioRef, analyzerCallback, endedCallback) => {\n  _s();\n\n  const analyzer = useRef(null);\n  return useEffect(() => {\n    const createAnalyzer = async () => {\n      const AudioContext = window.AudioContext || window.webkitAudioContext;\n      const audioContext = new AudioContext({\n        sampleRate: 22050\n      });\n      const source = audioContext.createMediaElementSource(audioRef.current);\n      source.connect(audioContext.destination);\n      analyzer.current = Meyda.createMeydaAnalyzer({\n        audioContext: audioContext,\n        source: source,\n        bufferSize: 512,\n        featureExtractors: [\"buffer\", \"rms\"],\n        sampleRate: 22050,\n        hopSize: 512,\n        windowingFunction: \"hanning\",\n        callback: analyzerCallback\n      });\n    };\n\n    if (audioRef.current instanceof HTMLAudioElement) {\n      audioRef.current.onplay = async () => {\n        var _analyzer$current;\n\n        if (!analyzer.current) {\n          await createAnalyzer();\n        }\n\n        (_analyzer$current = analyzer.current) === null || _analyzer$current === void 0 ? void 0 : _analyzer$current.start();\n      };\n\n      audioRef.current.onended = () => {\n        var _analyzer$current2;\n\n        (_analyzer$current2 = analyzer.current) === null || _analyzer$current2 === void 0 ? void 0 : _analyzer$current2.stop();\n        endedCallback();\n      };\n    }\n\n    return () => {\n      var _analyzer$current3;\n\n      (_analyzer$current3 = analyzer.current) === null || _analyzer$current3 === void 0 ? void 0 : _analyzer$current3.stop();\n    };\n  }, [audioRef, analyzerCallback, endedCallback]);\n};\n\n_s(useAudioAnalyzer, \"5/6hxylgaRWJdvuJ6dUORwzXL7g=\");\n\nlet data = [];\nexport default function VoiceEmotionDebugging() {\n  _s2();\n\n  const audioRef = useRef(null);\n  const [activeVoice, setActiveVoice] = useState(\"/ravdess/03-01-01-01-01-01-03.wav\");\n  const onnxSession = useRef(null);\n  const [modelLoading, setModelLoading] = useState(false);\n  const [waveform, setWaveform] = useState([]);\n  const [predictions, setPredictions] = useState([]);\n  useEffect(() => {\n    const loadModel = async () => {\n      setModelLoading(true);\n      onnxSession.current = await InferenceSession.create(\"/onnx/voice_emotion_cnn.onnx\", {\n        executionProviders: [\"wasm\"]\n      });\n      setModelLoading(false);\n    };\n\n    loadModel();\n  }, []);\n  useAudioAnalyzer(audioRef, features => {\n    data.push(...features.buffer);\n  }, async () => {\n    if (onnxSession.current) {\n      const offset = Math.floor((data.length - 22050 * 2.1) / 2);\n\n      if (offset < 0) {\n        // Pad with zeros\n        data.unshift(...new Array(Math.abs(offset)).fill(0.0));\n        data.push(...new Array(Math.abs(offset) - 1).fill(0.0));\n      } else {\n        // Cut off the overhead equally at the beginning and the end\n        data = data.slice(offset, 22050 * 2.1 + offset);\n      }\n\n      data = rmsNormalize(data);\n      const input = new Tensor(\"float32\", Float32Array.from(data), [1, 22050 * 2.1]);\n      const results = await onnxSession.current.run({\n        input\n      });\n      setPredictions(softmax(Array.from(results.output.data)));\n      setWaveform([...data]);\n      data = [];\n    }\n  });\n  const theme = useTheme();\n  return /*#__PURE__*/_jsxDEV(Page, {\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h1\",\n        children: \"Voice Emotion Debugging\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h5\",\n        children: \"This page is useful for debugging the voice emotion model.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        minHeight: \"4rem\",\n        mt: 2,\n        display: \"flex\",\n        alignItems: \"center\",\n        children: [modelLoading && /*#__PURE__*/_jsxDEV(Box, {\n          display: \"flex\",\n          alignItems: \"center\",\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            mr: 2,\n            children: /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body1\",\n              children: \"Model loading ...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          mr: 2,\n          children: /*#__PURE__*/_jsxDEV(\"audio\", {\n            style: {\n              display: modelLoading ? \"none\" : \"inline-block\"\n            },\n            ref: audioRef,\n            controls: true,\n            crossOrigin: \"anonymous\",\n            id: \"audio\",\n            src: activeVoice\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          display: \"flex\",\n          flexDirection: \"column\",\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            children: \"RAVDESS\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle2\",\n            children: \"Neutral and Calm have been merged into Neutral.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ButtonGroup, {\n            color: \"primary\",\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              disabled: activeVoice === \"/ravdess/03-01-01-01-01-01-03.wav\",\n              onClick: () => {\n                setActiveVoice(\"/ravdess/03-01-01-01-01-01-03.wav\");\n              },\n              children: \"Neutral\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              disabled: activeVoice === \"/ravdess/03-01-02-02-01-01-22.wav\",\n              onClick: () => {\n                setActiveVoice(\"/ravdess/03-01-02-02-01-01-22.wav\");\n              },\n              children: \"Calm\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              disabled: activeVoice === \"/ravdess/03-01-03-01-02-01-07.wav\",\n              onClick: () => {\n                setActiveVoice(\"/ravdess/03-01-03-01-02-01-07.wav\");\n              },\n              children: \"Happy\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              disabled: activeVoice === \"/ravdess/03-01-04-01-01-02-16.wav\",\n              onClick: () => {\n                setActiveVoice(\"/ravdess/03-01-04-01-01-02-16.wav\");\n              },\n              children: \"Sad\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              disabled: activeVoice === \"/ravdess/03-01-05-01-02-01-13.wav\",\n              onClick: () => {\n                setActiveVoice(\"/ravdess/03-01-05-01-02-01-13.wav\");\n              },\n              children: \"Angry\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              disabled: activeVoice === \"/ravdess/03-01-06-02-01-02-16.wav\",\n              onClick: () => {\n                setActiveVoice(\"/ravdess/03-01-06-02-01-02-16.wav\");\n              },\n              children: \"Fearful\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              disabled: activeVoice === \"/ravdess/03-01-07-01-01-01-19.wav\",\n              onClick: () => {\n                setActiveVoice(\"/ravdess/03-01-07-01-01-01-19.wav\");\n              },\n              children: \"Disgust\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              disabled: activeVoice === \"/ravdess/03-01-08-01-01-01-08.wav\",\n              onClick: () => {\n                setActiveVoice(\"/ravdess/03-01-08-01-01-01-08.wav\");\n              },\n              children: \"Surprised\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            children: \"EMO-DB\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle2\",\n            children: \"Neutral and Boredom have been merged into Neutral. There is no surprised emotion.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ButtonGroup, {\n            color: \"primary\",\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              disabled: activeVoice === \"/emodb/03a01Nc.wav\",\n              onClick: () => {\n                setActiveVoice(\"/emodb/03a01Nc.wav\");\n              },\n              children: \"Neutral\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              disabled: activeVoice === \"/emodb/03a04Lc.wav\",\n              onClick: () => {\n                setActiveVoice(\"/emodb/03a04Lc.wav\");\n              },\n              children: \"Boredom\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              disabled: activeVoice === \"/emodb/03a01Fa.wav\",\n              onClick: () => {\n                setActiveVoice(\"/emodb/03a01Fa.wav\");\n              },\n              children: \"Happy\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              disabled: activeVoice === \"/emodb/11a02Tc.wav\",\n              onClick: () => {\n                setActiveVoice(\"/emodb/11a02Tc.wav\");\n              },\n              children: \"Sad\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              disabled: activeVoice === \"/emodb/03a01Wa.wav\",\n              onClick: () => {\n                setActiveVoice(\"/emodb/03a01Wa.wav\");\n              },\n              children: \"Angry\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              disabled: activeVoice === \"/emodb/10a05Aa.wav\",\n              onClick: () => {\n                setActiveVoice(\"/emodb/10a05Aa.wav\");\n              },\n              children: \"Fearful\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              disabled: activeVoice === \"/emodb/11b01Eb.wav\",\n              onClick: () => {\n                setActiveVoice(\"/emodb/11b01Eb.wav\");\n              },\n              children: \"Disgust\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        mt: 2,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          children: \"Predictions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 11\n        }, this), predictions.length > 0 ? VOICE_EMOTIONS.map((emotion, index) => {\n          return /*#__PURE__*/_jsxDEV(Box, {\n            mr: 2,\n            display: \"inline-block\",\n            color: max(predictions) === predictions[index] ? \"primary.main\" : \"inherit\",\n            borderBottom: max(predictions) === predictions[index] ? 1 : 0,\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body1\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: [emotion.toUpperCase(), \": \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 316,\n                columnNumber: 21\n              }, this), predictions[index].toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 19\n            }, this)\n          }, emotion, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 17\n          }, this);\n        }) : /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body1\",\n          children: \"Run the audio file to perform a prediction.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        mt: 2,\n        children: /*#__PURE__*/_jsxDEV(Plot, {\n          config: {\n            displayModeBar: false\n          },\n          data: [{\n            type: \"scatter\",\n            mode: \"lines\",\n            y: waveform\n          }],\n          layout: {\n            title: \"RMS-normalized waveform\",\n            paper_bgcolor: \"transparent\",\n            plot_bgcolor: \"transparent\",\n            hovermode: false,\n            width: 1000,\n            height: 1000 / 1.66,\n            margin: {\n              l: 30,\n              r: 10,\n              t: 80,\n              b: 70\n            },\n            font: {\n              family: theme.typography.fontFamily,\n              color: theme.palette.text.primary\n            },\n            transition: {\n              duration: 500,\n              easing: \"cubic-in-out\"\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 136,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(VoiceEmotionDebugging, \"ZNEoCdNPt10qkwLcD1JsiHVQMQE=\", false, function () {\n  return [useAudioAnalyzer, useTheme];\n});\n\n_c = VoiceEmotionDebugging;\n\nvar _c;\n\n$RefreshReg$(_c, \"VoiceEmotionDebugging\");","map":{"version":3,"sources":["/Users/sanjayar/Desktop/moody-main copy 2/src/pages/VoiceEmotionDebugging.tsx"],"names":["Box","Button","ButtonGroup","Container","Typography","useTheme","useEffect","useRef","useState","Meyda","Plot","rmsNormalize","softmax","Loader","max","Page","InferenceSession","window","ort","Tensor","VOICE_EMOTIONS","useAudioAnalyzer","audioRef","analyzerCallback","endedCallback","analyzer","createAnalyzer","AudioContext","webkitAudioContext","audioContext","sampleRate","source","createMediaElementSource","current","connect","destination","createMeydaAnalyzer","bufferSize","featureExtractors","hopSize","windowingFunction","callback","HTMLAudioElement","onplay","start","onended","stop","data","VoiceEmotionDebugging","activeVoice","setActiveVoice","onnxSession","modelLoading","setModelLoading","waveform","setWaveform","predictions","setPredictions","loadModel","create","executionProviders","features","push","buffer","offset","Math","floor","length","unshift","Array","abs","fill","slice","input","Float32Array","from","results","run","output","theme","display","map","emotion","index","toUpperCase","toFixed","displayModeBar","type","mode","y","title","paper_bgcolor","plot_bgcolor","hovermode","width","height","margin","l","r","t","b","font","family","typography","fontFamily","color","palette","text","primary","transition","duration","easing"],"mappings":"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","sourcesContent":["import {\n  Box,\n  Button,\n  ButtonGroup,\n  Container,\n  Typography,\n  useTheme,\n} from \"@material-ui/core\";\nimport { RefObject, useEffect, useRef, useState } from \"react\";\nimport Meyda from \"meyda\";\nimport Plot from \"react-plotly.js\";\nimport { rmsNormalize, softmax } from \"../utils\";\nimport Loader from \"../components/Loader\";\nimport max from \"lodash-es/max\";\nimport Page from \"../components/Page\";\n// onnxruntime-web is included in public/index.html as <script>\n// .wasm files are currently not compatible with the create-react-app webpack config\nconst InferenceSession = (window as any).ort.InferenceSession;\nconst Tensor = (window as any).ort.Tensor;\n\nconst VOICE_EMOTIONS = [\n  \"neutral\",\n  \"happy\",\n  \"sad\",\n  \"angry\",\n  \"fearful\",\n  \"disgust\",\n  \"surprised\",\n];\n\nconst useAudioAnalyzer = (\n  audioRef: RefObject<HTMLAudioElement>,\n  analyzerCallback: (features: Partial<Meyda.MeydaFeaturesObject>) => void,\n  endedCallback: () => void\n) => {\n  const analyzer = useRef<Meyda.MeydaAnalyzer | null>(null);\n\n  return useEffect(() => {\n    const createAnalyzer = async (): Promise<void> => {\n      const AudioContext =\n        window.AudioContext || (window as any).webkitAudioContext;\n      const audioContext = new AudioContext({ sampleRate: 22050 });\n      const source = audioContext.createMediaElementSource(audioRef.current!);\n      source.connect(audioContext.destination);\n\n      analyzer.current = Meyda.createMeydaAnalyzer({\n        audioContext: audioContext,\n        source: source,\n        bufferSize: 512,\n        featureExtractors: [\"buffer\", \"rms\"],\n        sampleRate: 22050,\n        hopSize: 512,\n        windowingFunction: \"hanning\",\n        callback: analyzerCallback,\n      });\n    };\n\n    if (audioRef.current instanceof HTMLAudioElement) {\n      audioRef.current.onplay = async () => {\n        if (!analyzer.current) {\n          await createAnalyzer();\n        }\n        analyzer.current?.start();\n      };\n\n      audioRef.current.onended = () => {\n        analyzer.current?.stop();\n        endedCallback();\n      };\n    }\n\n    return () => {\n      analyzer.current?.stop();\n    };\n  }, [audioRef, analyzerCallback, endedCallback]);\n};\n\nlet data: number[] = [];\n\nexport default function VoiceEmotionDebugging(): JSX.Element {\n  const audioRef = useRef<HTMLAudioElement>(null);\n  const [activeVoice, setActiveVoice] = useState<string>(\n    \"/ravdess/03-01-01-01-01-01-03.wav\"\n  );\n\n  const onnxSession = useRef<typeof InferenceSession | null>(null);\n  const [modelLoading, setModelLoading] = useState<boolean>(false);\n  const [waveform, setWaveform] = useState<number[]>([]);\n  const [predictions, setPredictions] = useState<number[]>([]);\n\n  useEffect(() => {\n    const loadModel = async () => {\n      setModelLoading(true);\n      onnxSession.current = await InferenceSession.create(\n        \"/onnx/voice_emotion_cnn.onnx\",\n        { executionProviders: [\"wasm\"] }\n      );\n      setModelLoading(false);\n    };\n    loadModel();\n  }, []);\n\n  useAudioAnalyzer(\n    audioRef,\n    (features) => {\n      data.push(...features.buffer!);\n    },\n    async () => {\n      if (onnxSession.current) {\n        const offset = Math.floor((data.length - 22050 * 2.1) / 2);\n        if (offset < 0) {\n          // Pad with zeros\n          data.unshift(...new Array<number>(Math.abs(offset)).fill(0.0));\n          data.push(...new Array<number>(Math.abs(offset) - 1).fill(0.0));\n        } else {\n          // Cut off the overhead equally at the beginning and the end\n          data = data.slice(offset, 22050 * 2.1 + offset);\n        }\n        data = rmsNormalize(data);\n\n        const input = new Tensor(\"float32\", Float32Array.from(data), [\n          1,\n          22050 * 2.1,\n        ]);\n        const results = await onnxSession.current.run({ input });\n\n        setPredictions(softmax(Array.from(results.output.data)));\n        setWaveform([...data]);\n        data = [];\n      }\n    }\n  );\n  const theme = useTheme();\n\n  return (\n    <Page>\n      <Container>\n        <Typography variant=\"h1\">Voice Emotion Debugging</Typography>\n        <Typography variant=\"h5\">\n          This page is useful for debugging the voice emotion model.\n        </Typography>\n        <Box minHeight=\"4rem\" mt={2} display=\"flex\" alignItems=\"center\">\n          {modelLoading && (\n            <Box display=\"flex\" alignItems=\"center\">\n              <Box mr={2}>\n                <Loader />\n              </Box>\n              <Box>\n                <Typography variant=\"body1\">Model loading ...</Typography>\n              </Box>\n            </Box>\n          )}\n          <Box mr={2}>\n            <audio\n              style={{ display: modelLoading ? \"none\" : \"inline-block\" }}\n              ref={audioRef}\n              controls\n              crossOrigin=\"anonymous\"\n              id=\"audio\"\n              src={activeVoice}\n            />\n          </Box>\n          <Box display=\"flex\" flexDirection=\"column\">\n            <Typography variant=\"h6\">RAVDESS</Typography>\n            <Typography variant=\"subtitle2\">\n              Neutral and Calm have been merged into Neutral.\n            </Typography>\n            <ButtonGroup color=\"primary\">\n              <Button\n                disabled={activeVoice === \"/ravdess/03-01-01-01-01-01-03.wav\"}\n                onClick={() => {\n                  setActiveVoice(\"/ravdess/03-01-01-01-01-01-03.wav\");\n                }}\n              >\n                Neutral\n              </Button>\n              <Button\n                disabled={activeVoice === \"/ravdess/03-01-02-02-01-01-22.wav\"}\n                onClick={() => {\n                  setActiveVoice(\"/ravdess/03-01-02-02-01-01-22.wav\");\n                }}\n              >\n                Calm\n              </Button>\n              <Button\n                disabled={activeVoice === \"/ravdess/03-01-03-01-02-01-07.wav\"}\n                onClick={() => {\n                  setActiveVoice(\"/ravdess/03-01-03-01-02-01-07.wav\");\n                }}\n              >\n                Happy\n              </Button>\n              <Button\n                disabled={activeVoice === \"/ravdess/03-01-04-01-01-02-16.wav\"}\n                onClick={() => {\n                  setActiveVoice(\"/ravdess/03-01-04-01-01-02-16.wav\");\n                }}\n              >\n                Sad\n              </Button>\n              <Button\n                disabled={activeVoice === \"/ravdess/03-01-05-01-02-01-13.wav\"}\n                onClick={() => {\n                  setActiveVoice(\"/ravdess/03-01-05-01-02-01-13.wav\");\n                }}\n              >\n                Angry\n              </Button>\n              <Button\n                disabled={activeVoice === \"/ravdess/03-01-06-02-01-02-16.wav\"}\n                onClick={() => {\n                  setActiveVoice(\"/ravdess/03-01-06-02-01-02-16.wav\");\n                }}\n              >\n                Fearful\n              </Button>\n              <Button\n                disabled={activeVoice === \"/ravdess/03-01-07-01-01-01-19.wav\"}\n                onClick={() => {\n                  setActiveVoice(\"/ravdess/03-01-07-01-01-01-19.wav\");\n                }}\n              >\n                Disgust\n              </Button>\n              <Button\n                disabled={activeVoice === \"/ravdess/03-01-08-01-01-01-08.wav\"}\n                onClick={() => {\n                  setActiveVoice(\"/ravdess/03-01-08-01-01-01-08.wav\");\n                }}\n              >\n                Surprised\n              </Button>\n            </ButtonGroup>\n            <Typography variant=\"h6\">EMO-DB</Typography>\n            <Typography variant=\"subtitle2\">\n              Neutral and Boredom have been merged into Neutral. There is no\n              surprised emotion.\n            </Typography>\n            <ButtonGroup color=\"primary\">\n              <Button\n                disabled={activeVoice === \"/emodb/03a01Nc.wav\"}\n                onClick={() => {\n                  setActiveVoice(\"/emodb/03a01Nc.wav\");\n                }}\n              >\n                Neutral\n              </Button>\n              <Button\n                disabled={activeVoice === \"/emodb/03a04Lc.wav\"}\n                onClick={() => {\n                  setActiveVoice(\"/emodb/03a04Lc.wav\");\n                }}\n              >\n                Boredom\n              </Button>\n              <Button\n                disabled={activeVoice === \"/emodb/03a01Fa.wav\"}\n                onClick={() => {\n                  setActiveVoice(\"/emodb/03a01Fa.wav\");\n                }}\n              >\n                Happy\n              </Button>\n              <Button\n                disabled={activeVoice === \"/emodb/11a02Tc.wav\"}\n                onClick={() => {\n                  setActiveVoice(\"/emodb/11a02Tc.wav\");\n                }}\n              >\n                Sad\n              </Button>\n              <Button\n                disabled={activeVoice === \"/emodb/03a01Wa.wav\"}\n                onClick={() => {\n                  setActiveVoice(\"/emodb/03a01Wa.wav\");\n                }}\n              >\n                Angry\n              </Button>\n              <Button\n                disabled={activeVoice === \"/emodb/10a05Aa.wav\"}\n                onClick={() => {\n                  setActiveVoice(\"/emodb/10a05Aa.wav\");\n                }}\n              >\n                Fearful\n              </Button>\n              <Button\n                disabled={activeVoice === \"/emodb/11b01Eb.wav\"}\n                onClick={() => {\n                  setActiveVoice(\"/emodb/11b01Eb.wav\");\n                }}\n              >\n                Disgust\n              </Button>\n            </ButtonGroup>\n          </Box>\n        </Box>\n        <Box mt={2}>\n          <Typography variant=\"h6\">Predictions</Typography>\n          {predictions.length > 0 ? (\n            VOICE_EMOTIONS.map((emotion, index) => {\n              return (\n                <Box\n                  mr={2}\n                  display=\"inline-block\"\n                  color={\n                    max(predictions) === predictions[index]\n                      ? \"primary.main\"\n                      : \"inherit\"\n                  }\n                  borderBottom={max(predictions) === predictions[index] ? 1 : 0}\n                  key={emotion}\n                >\n                  <Typography variant=\"body1\">\n                    <strong>{emotion.toUpperCase()}: </strong>\n                    {predictions[index].toFixed(2)}\n                  </Typography>\n                </Box>\n              );\n            })\n          ) : (\n            <Typography variant=\"body1\">\n              Run the audio file to perform a prediction.\n            </Typography>\n          )}\n        </Box>\n        <Box mt={2}>\n          <Plot\n            config={{\n              displayModeBar: false,\n            }}\n            data={[{ type: \"scatter\", mode: \"lines\", y: waveform }]}\n            layout={{\n              title: \"RMS-normalized waveform\",\n              paper_bgcolor: \"transparent\",\n              plot_bgcolor: \"transparent\",\n              hovermode: false,\n              width: 1000,\n              height: 1000 / 1.66,\n              margin: {\n                l: 30,\n                r: 10,\n                t: 80,\n                b: 70,\n              },\n              font: {\n                family: theme.typography.fontFamily,\n                color: theme.palette.text.primary,\n              },\n              transition: {\n                duration: 500,\n                easing: \"cubic-in-out\",\n              },\n            }}\n          />\n        </Box>\n      </Container>\n    </Page>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}