{"ast":null,"code":"var _jsxFileName = \"/Users/sanjayar/Desktop/moody-main copy/src/pages/meeting/Meeting.tsx\",\n    _s = $RefreshSig$();\n\nimport { Box, Button, Container, Paper, Tab, Typography, useTheme } from \"@material-ui/core\";\nimport { ArrowBackIos, PlayArrow, Stop } from \"@material-ui/icons\";\nimport { Alert, AlertTitle, TabContext, TabList, TabPanel } from \"@material-ui/lab\";\nimport { useCallback, useRef, useState } from \"react\";\nimport { Link as RouterLink, useParams } from \"react-router-dom\";\nimport Loader from \"../../components/Loader\";\nimport Page from \"../../components/Page\";\nimport { startMeeting, stopMeeting } from \"../../meetings/meetingsSlice\";\nimport { useAppDispatch } from \"../../reduxHooks\";\nimport AudienceEmotionBarometer from \"./AudienceEmotionBarometer\";\nimport AudienceEmotionRollercoaster from \"./AudienceEmotionRollercoaster\";\nimport EmotionRadar from \"./EmotionRadar\";\nimport ExportButton from \"./ExportButton\";\nimport FeedbackLinkButton from \"./FeedbackLinkButton\";\nimport { useEmotionDetection, useFetchMeeting, useMeetingInformation, useScreenCapturingIfMeetingIsRunning } from \"./hooks\";\nimport Ratings from \"./Ratings\";\nimport StartScreenCapturingDialog from \"./StartScreenCapturingDialog\";\nimport VoiceCaptureControls from \"./VoiceCaptureControls\";\nimport VoiceVisualization from \"./VoiceVisualization\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Meeting() {\n  _s();\n\n  var _videoRef$current;\n\n  const {\n    id\n  } = useParams();\n  const [notFound] = useFetchMeeting(id);\n  const [meetingLoading, meetingRunning, meetingEnded, meetingName] = useMeetingInformation(id);\n  const dispatch = useAppDispatch();\n  const handleStartMeeting = useCallback(async () => {\n    dispatch(startMeeting());\n  }, [dispatch]);\n  const handleStopMeeting = useCallback(() => {\n    dispatch(stopMeeting());\n  }, [dispatch]);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const handleStartScreenCapturing = useScreenCapturingIfMeetingIsRunning(videoRef, handleStopMeeting);\n  useEmotionDetection(videoRef, canvasRef);\n  const [audioStream, setAudioStream] = useState(undefined);\n  const [tabValue, setTabValue] = useState(\"1\");\n\n  const handleTabChange = (event, newValue) => {\n    setTabValue(newValue);\n  };\n\n  const theme = useTheme();\n  return /*#__PURE__*/_jsxDEV(Page, {\n    children: [/*#__PURE__*/_jsxDEV(\"video\", {\n      ref: videoRef,\n      width: 1000,\n      height: 564,\n      autoPlay: true,\n      muted: true,\n      style: {\n        display: \"none\",\n        visibility: \"hidden\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        color: \"primary\",\n        startIcon: /*#__PURE__*/_jsxDEV(ArrowBackIos, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 22\n        }, this),\n        component: RouterLink,\n        to: \"/meetings\",\n        children: \"Back\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), meetingLoading ? /*#__PURE__*/_jsxDEV(Box, {\n        children: /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }, this) : notFound ? /*#__PURE__*/_jsxDEV(Box, {\n        mt: 2,\n        children: /*#__PURE__*/_jsxDEV(Alert, {\n          severity: \"warning\",\n          children: [/*#__PURE__*/_jsxDEV(AlertTitle, {\n            children: \"Oh no! Meeting not found \\uD83D\\uDE29\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body1\",\n            children: \"This meeting does not exist or has been deleted.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h1\",\n          children: meetingName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }, this), meetingEnded ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            children: \"This meeting has ended and cannot be started again. \\uD83D\\uDC4F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(FeedbackLinkButton, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(ExportButton, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(Box, {\n          display: \"flex\",\n          alignItems: \"center\",\n          children: [/*#__PURE__*/_jsxDEV(StartScreenCapturingDialog, {\n            handleStartScreenCapturing: handleStartScreenCapturing\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            color: meetingRunning ? \"secondary\" : \"primary\",\n            variant: \"contained\",\n            size: \"large\",\n            startIcon: meetingRunning ? /*#__PURE__*/_jsxDEV(Stop, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 47\n            }, this) : /*#__PURE__*/_jsxDEV(PlayArrow, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 58\n            }, this),\n            onClick: meetingRunning ? handleStopMeeting : handleStartMeeting,\n            children: [meetingRunning ? \"Stop\" : \"Start\", \" the meeting\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 17\n          }, this), meetingRunning && /*#__PURE__*/_jsxDEV(Box, {\n            ml: 3,\n            children: /*#__PURE__*/_jsxDEV(VoiceCaptureControls, {\n              handleMediaStream: setAudioStream\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          mt: 2,\n          children: /*#__PURE__*/_jsxDEV(TabContext, {\n            value: tabValue,\n            children: [/*#__PURE__*/_jsxDEV(Paper, {\n              square: true,\n              children: /*#__PURE__*/_jsxDEV(TabList, {\n                onChange: handleTabChange,\n                children: [/*#__PURE__*/_jsxDEV(Tab, {\n                  label: \"Statistics\",\n                  value: \"1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Tab, {\n                  label: \"Faces\",\n                  value: \"2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 146,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Tab, {\n                  label: \"Voice\",\n                  value: \"3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 147,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Tab, {\n                  label: \"Ratings\",\n                  value: \"4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 148,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n              value: \"1\",\n              style: {\n                padding: theme.spacing(2, 0)\n              },\n              children: [/*#__PURE__*/_jsxDEV(Box, {\n                display: \"inline-block\",\n                mr: 2,\n                children: meetingEnded ? /*#__PURE__*/_jsxDEV(EmotionRadar, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 154,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(AudienceEmotionBarometer, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 156,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                display: \"inline-block\",\n                children: /*#__PURE__*/_jsxDEV(AudienceEmotionRollercoaster, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n              value: \"2\",\n              style: {\n                padding: theme.spacing(2, 0)\n              },\n              children: !meetingRunning ? /*#__PURE__*/_jsxDEV(Alert, {\n                severity: \"info\",\n                children: /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body1\",\n                  children: \"This visualization is only available if the meeting is running.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [!((_videoRef$current = videoRef.current) === null || _videoRef$current === void 0 ? void 0 : _videoRef$current.srcObject) && /*#__PURE__*/_jsxDEV(Alert, {\n                  severity: \"info\",\n                  children: /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body1\",\n                    children: \"There is no active screen capturing. Did you allow the application access to your screen? Reload the page to try again.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 175,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n                  ref: canvasRef\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 182,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n              value: \"3\",\n              style: {\n                padding: theme.spacing(2, 0)\n              },\n              children: !meetingRunning ? /*#__PURE__*/_jsxDEV(Alert, {\n                severity: \"info\",\n                children: /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body1\",\n                  children: \"This visualization is only available if the meeting is running.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: audioStream instanceof MediaStream ? /*#__PURE__*/_jsxDEV(VoiceVisualization, {\n                  audioStream: audioStream\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(Alert, {\n                  severity: \"info\",\n                  children: /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body1\",\n                    children: \"This visualization is only available if the voice tracking is active. Enable it using the switch above.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 200,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 199,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n              value: \"4\",\n              style: {\n                padding: theme.spacing(2, 0)\n              },\n              children: /*#__PURE__*/_jsxDEV(Ratings, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Meeting, \"hx72+JrqPDfNczQobAFwxgROgbw=\", false, function () {\n  return [useParams, useFetchMeeting, useMeetingInformation, useAppDispatch, useScreenCapturingIfMeetingIsRunning, useEmotionDetection, useTheme];\n});\n\n_c = Meeting;\n\nvar _c;\n\n$RefreshReg$(_c, \"Meeting\");","map":{"version":3,"sources":["/Users/sanjayar/Desktop/moody-main copy/src/pages/meeting/Meeting.tsx"],"names":["Box","Button","Container","Paper","Tab","Typography","useTheme","ArrowBackIos","PlayArrow","Stop","Alert","AlertTitle","TabContext","TabList","TabPanel","useCallback","useRef","useState","Link","RouterLink","useParams","Loader","Page","startMeeting","stopMeeting","useAppDispatch","AudienceEmotionBarometer","AudienceEmotionRollercoaster","EmotionRadar","ExportButton","FeedbackLinkButton","useEmotionDetection","useFetchMeeting","useMeetingInformation","useScreenCapturingIfMeetingIsRunning","Ratings","StartScreenCapturingDialog","VoiceCaptureControls","VoiceVisualization","Meeting","id","notFound","meetingLoading","meetingRunning","meetingEnded","meetingName","dispatch","handleStartMeeting","handleStopMeeting","videoRef","canvasRef","handleStartScreenCapturing","audioStream","setAudioStream","undefined","tabValue","setTabValue","handleTabChange","event","newValue","theme","display","visibility","padding","spacing","current","srcObject","MediaStream"],"mappings":"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","sourcesContent":["import {\n  Box,\n  Button,\n  Container,\n  Paper,\n  Tab,\n  Typography,\n  useTheme,\n} from \"@material-ui/core\";\nimport { ArrowBackIos, PlayArrow, Stop } from \"@material-ui/icons\";\nimport {\n  Alert,\n  AlertTitle,\n  TabContext,\n  TabList,\n  TabPanel,\n} from \"@material-ui/lab\";\nimport { useCallback, useRef, useState } from \"react\";\nimport { Link as RouterLink, useParams } from \"react-router-dom\";\nimport Loader from \"../../components/Loader\";\nimport Page from \"../../components/Page\";\nimport { startMeeting, stopMeeting } from \"../../meetings/meetingsSlice\";\nimport { useAppDispatch } from \"../../reduxHooks\";\nimport AudienceEmotionBarometer from \"./AudienceEmotionBarometer\";\nimport AudienceEmotionRollercoaster from \"./AudienceEmotionRollercoaster\";\nimport EmotionRadar from \"./EmotionRadar\";\nimport ExportButton from \"./ExportButton\";\nimport FeedbackLinkButton from \"./FeedbackLinkButton\";\nimport {\n  useEmotionDetection,\n  useFetchMeeting,\n  useMeetingInformation,\n  useScreenCapturingIfMeetingIsRunning,\n} from \"./hooks\";\nimport Ratings from \"./Ratings\";\nimport StartScreenCapturingDialog from \"./StartScreenCapturingDialog\";\nimport VoiceCaptureControls from \"./VoiceCaptureControls\";\nimport VoiceVisualization from \"./VoiceVisualization\";\n\nexport default function Meeting(): JSX.Element {\n  const { id } = useParams() as any;\n  const [notFound] = useFetchMeeting(id);\n  const [meetingLoading, meetingRunning, meetingEnded, meetingName] =\n    useMeetingInformation(id);\n\n  const dispatch = useAppDispatch();\n\n  const handleStartMeeting = useCallback(async () => {\n    dispatch(startMeeting());\n  }, [dispatch]);\n\n  const handleStopMeeting = useCallback(() => {\n    dispatch(stopMeeting());\n  }, [dispatch]);\n\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const handleStartScreenCapturing = useScreenCapturingIfMeetingIsRunning(\n    videoRef,\n    handleStopMeeting\n  );\n  useEmotionDetection(videoRef, canvasRef);\n\n  const [audioStream, setAudioStream] = useState<MediaStream | undefined>(\n    undefined\n  );\n\n  const [tabValue, setTabValue] = useState<string>(\"1\");\n  const handleTabChange = (event: React.ChangeEvent<{}>, newValue: string) => {\n    setTabValue(newValue);\n  };\n\n  const theme = useTheme();\n\n  return (\n    <Page>\n      <video\n        ref={videoRef}\n        width={1000}\n        height={564}\n        autoPlay\n        muted\n        style={{ display: \"none\", visibility: \"hidden\" }}\n      />\n      <Container>\n        <Button\n          color=\"primary\"\n          startIcon={<ArrowBackIos />}\n          component={RouterLink}\n          to=\"/meetings\"\n        >\n          Back\n        </Button>\n        {meetingLoading ? (\n          <Box>\n            <Loader />\n          </Box>\n        ) : notFound ? (\n          <Box mt={2}>\n            <Alert severity=\"warning\">\n              <AlertTitle>Oh no! Meeting not found 😩</AlertTitle>\n              <Typography variant=\"body1\">\n                This meeting does not exist or has been deleted.\n              </Typography>\n            </Alert>\n          </Box>\n        ) : (\n          <>\n            <Typography variant=\"h1\">{meetingName}</Typography>\n            {meetingEnded ? (\n              <>\n                <Typography variant=\"h5\">\n                  This meeting has ended and cannot be started again. 👏\n                </Typography>\n                <FeedbackLinkButton />\n                <ExportButton />\n              </>\n            ) : (\n              <Box display=\"flex\" alignItems=\"center\">\n                <StartScreenCapturingDialog\n                  handleStartScreenCapturing={handleStartScreenCapturing}\n                />\n                <Button\n                  color={meetingRunning ? \"secondary\" : \"primary\"}\n                  variant=\"contained\"\n                  size=\"large\"\n                  startIcon={meetingRunning ? <Stop /> : <PlayArrow />}\n                  onClick={\n                    meetingRunning ? handleStopMeeting : handleStartMeeting\n                  }\n                >\n                  {meetingRunning ? \"Stop\" : \"Start\"} the meeting\n                </Button>\n                {meetingRunning && (\n                  <Box ml={3}>\n                    <VoiceCaptureControls handleMediaStream={setAudioStream} />\n                  </Box>\n                )}\n              </Box>\n            )}\n            <Box mt={2}>\n              <TabContext value={tabValue}>\n                <Paper square>\n                  <TabList onChange={handleTabChange}>\n                    <Tab label=\"Statistics\" value=\"1\" />\n                    <Tab label=\"Faces\" value=\"2\" />\n                    <Tab label=\"Voice\" value=\"3\" />\n                    <Tab label=\"Ratings\" value=\"4\" />\n                  </TabList>\n                </Paper>\n                <TabPanel value=\"1\" style={{ padding: theme.spacing(2, 0) }}>\n                  <Box display=\"inline-block\" mr={2}>\n                    {meetingEnded ? (\n                      <EmotionRadar />\n                    ) : (\n                      <AudienceEmotionBarometer />\n                    )}\n                  </Box>\n                  <Box display=\"inline-block\">\n                    <AudienceEmotionRollercoaster />\n                  </Box>\n                </TabPanel>\n                <TabPanel value=\"2\" style={{ padding: theme.spacing(2, 0) }}>\n                  {!meetingRunning ? (\n                    <Alert severity=\"info\">\n                      <Typography variant=\"body1\">\n                        This visualization is only available if the meeting is\n                        running.\n                      </Typography>\n                    </Alert>\n                  ) : (\n                    <>\n                      {!videoRef.current?.srcObject && (\n                        <Alert severity=\"info\">\n                          <Typography variant=\"body1\">\n                            There is no active screen capturing. Did you allow\n                            the application access to your screen? Reload the\n                            page to try again.\n                          </Typography>\n                        </Alert>\n                      )}\n                      <canvas ref={canvasRef} />\n                    </>\n                  )}\n                </TabPanel>\n                <TabPanel value=\"3\" style={{ padding: theme.spacing(2, 0) }}>\n                  {!meetingRunning ? (\n                    <Alert severity=\"info\">\n                      <Typography variant=\"body1\">\n                        This visualization is only available if the meeting is\n                        running.\n                      </Typography>\n                    </Alert>\n                  ) : (\n                    <>\n                      {audioStream instanceof MediaStream ? (\n                        <VoiceVisualization audioStream={audioStream} />\n                      ) : (\n                        <Alert severity=\"info\">\n                          <Typography variant=\"body1\">\n                            This visualization is only available if the voice\n                            tracking is active. Enable it using the switch\n                            above.\n                          </Typography>\n                        </Alert>\n                      )}\n                    </>\n                  )}\n                </TabPanel>\n                <TabPanel value=\"4\" style={{ padding: theme.spacing(2, 0) }}>\n                  <Ratings />\n                </TabPanel>\n              </TabContext>\n            </Box>\n          </>\n        )}\n      </Container>\n    </Page>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}