{"ast":null,"code":"var _jsxFileName = \"/Users/sanjayar/Desktop/moody-main copy/src/pages/feedback/Feedback.tsx\",\n    _s = $RefreshSig$();\n\nimport { Box, Button, Container, Typography } from \"@material-ui/core\";\nimport { useParams } from \"react-router-dom\";\nimport Error from \"../../error/Error\";\nimport { useState } from \"react\";\nimport { Alert, AlertTitle } from \"@material-ui/lab\";\nimport { Favorite, Security, Send } from \"@material-ui/icons\";\nimport { formatDistanceToNow } from \"date-fns\";\nimport NotFound from \"../NotFound\";\nimport { useFetchPublicMeeting, useSubmitAnswer } from \"./hooks\";\nimport { EXPIRATION_MINUTES } from \"./constants\";\nimport { red } from \"@material-ui/core/colors\";\nimport { useAppSelector } from \"../../reduxHooks\";\nimport Question from \"./Question\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Feedback() {\n  _s();\n\n  const {\n    publicMeetingId\n  } = useParams();\n  const [meetingLoading, expired, publicMeeting] = useFetchPublicMeeting(publicMeetingId);\n  const [submitLoading, submitted, submitAnswer] = useSubmitAnswer(publicMeeting === null || publicMeeting === void 0 ? void 0 : publicMeeting.id, publicMeeting === null || publicMeeting === void 0 ? void 0 : publicMeeting.owner);\n  const signedIn = useAppSelector(state => state.auth.signedIn);\n  const userId = useAppSelector(state => {\n    var _state$auth$user;\n\n    return (_state$auth$user = state.auth.user) === null || _state$auth$user === void 0 ? void 0 : _state$auth$user.id;\n  });\n  const [overallStars, setOverallStars] = useState(3);\n  const [paceStars, setPaceStars] = useState(null);\n  const [contentStars, setContentStars] = useState(null);\n  return !meetingLoading ? !publicMeeting ? /*#__PURE__*/_jsxDEV(NotFound, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 7\n  }, this) : /*#__PURE__*/_jsxDEV(Container, {\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      px: [0, 4, 8, 16],\n      children: userId === publicMeeting.owner ? /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"warning\",\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body1\",\n          children: /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"You cannot give yourself feedback!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 13\n      }, this) : !submitted ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          mb: 2,\n          children: [/*#__PURE__*/_jsxDEV(Error, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h1\",\n            children: \"Give Feedback\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            children: [\"for the presentation \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: publicMeeting === null || publicMeeting === void 0 ? void 0 : publicMeeting.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 50,\n              columnNumber: 40\n            }, this), \" \", \"which has just ended\", \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: formatDistanceToNow(new Date(publicMeeting === null || publicMeeting === void 0 ? void 0 : publicMeeting.stoppedAt), {\n                addSuffix: true\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 52,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 15\n        }, this), !expired ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            mb: 3,\n            children: /*#__PURE__*/_jsxDEV(Question, {\n              name: \"overallStars\",\n              stars: overallStars,\n              onChange: (event, newValue) => {\n                setOverallStars(newValue);\n              },\n              question: \"How do you rate the overall experience?\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            mb: 3,\n            children: /*#__PURE__*/_jsxDEV(Question, {\n              name: \"paceStars\",\n              stars: paceStars,\n              onChange: (event, newValue) => {\n                setPaceStars(newValue);\n              },\n              question: \"Was the speaker's pace right for you?\",\n              required: false\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            mb: 3,\n            children: /*#__PURE__*/_jsxDEV(Question, {\n              name: \"contentStars\",\n              stars: contentStars,\n              onChange: (event, newValue) => {\n                setContentStars(newValue);\n              },\n              question: \"Was the content useful?\",\n              required: false\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            mb: 2,\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              disabled: !overallStars || submitLoading,\n              endIcon: /*#__PURE__*/_jsxDEV(Send, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 32\n              }, this),\n              variant: \"contained\",\n              color: \"primary\",\n              onClick: () => submitAnswer(overallStars, paceStars, contentStars),\n              children: \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            children: /*#__PURE__*/_jsxDEV(Alert, {\n              severity: \"info\",\n              icon: /*#__PURE__*/_jsxDEV(Security, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 50\n              }, this),\n              children: [/*#__PURE__*/_jsxDEV(AlertTitle, {\n                children: \"Your feedback is anonymous\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body1\",\n                children: [\"We do not send any information related to your identity.\", \" \", signedIn && \"Feel free to logout if you feel safer then.\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(Alert, {\n          severity: \"warning\",\n          children: [/*#__PURE__*/_jsxDEV(AlertTitle, {\n            children: \"This link is expired\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body1\",\n            children: [\"You cannot give feedback anymore as the expiration time for this survey is \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: [EXPIRATION_MINUTES, \" minutes\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 36\n            }, this), \".\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(Box, {\n        height: 300,\n        mt: 4,\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        textAlign: \"center\",\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h1\",\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            display: \"flex\",\n            children: [/*#__PURE__*/_jsxDEV(Box, {\n              children: \"Thank you\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              color: red[500],\n              ml: 2,\n              children: /*#__PURE__*/_jsxDEV(Favorite, {\n                fontSize: \"inherit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"subtitle1\",\n          children: \"You can close this page now.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 7\n  }, this) : null;\n}\n\n_s(Feedback, \"NO2TF6QwyKjytalI4vkR3WGPal0=\", false, function () {\n  return [useParams, useFetchPublicMeeting, useSubmitAnswer, useAppSelector, useAppSelector];\n});\n\n_c = Feedback;\n\nvar _c;\n\n$RefreshReg$(_c, \"Feedback\");","map":{"version":3,"sources":["/Users/sanjayar/Desktop/moody-main copy/src/pages/feedback/Feedback.tsx"],"names":["Box","Button","Container","Typography","useParams","Error","useState","Alert","AlertTitle","Favorite","Security","Send","formatDistanceToNow","NotFound","useFetchPublicMeeting","useSubmitAnswer","EXPIRATION_MINUTES","red","useAppSelector","Question","Feedback","publicMeetingId","meetingLoading","expired","publicMeeting","submitLoading","submitted","submitAnswer","id","owner","signedIn","state","auth","userId","user","overallStars","setOverallStars","paceStars","setPaceStars","contentStars","setContentStars","name","Date","stoppedAt","addSuffix","event","newValue"],"mappings":"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","sourcesContent":["import { Box, Button, Container, Typography } from \"@material-ui/core\";\nimport { useParams } from \"react-router-dom\";\nimport Error from \"../../error/Error\";\nimport { useState } from \"react\";\nimport { Alert, AlertTitle } from \"@material-ui/lab\";\nimport { Favorite, Security, Send } from \"@material-ui/icons\";\nimport { formatDistanceToNow } from \"date-fns\";\nimport NotFound from \"../NotFound\";\nimport { useFetchPublicMeeting, useSubmitAnswer } from \"./hooks\";\nimport { EXPIRATION_MINUTES } from \"./constants\";\nimport { red } from \"@material-ui/core/colors\";\nimport { useAppSelector } from \"../../reduxHooks\";\nimport Question from \"./Question\";\n\nexport default function Feedback(): JSX.Element | null {\n  const { publicMeetingId } = useParams() as any;\n  const [meetingLoading, expired, publicMeeting] =\n    useFetchPublicMeeting(publicMeetingId);\n  const [submitLoading, submitted, submitAnswer] = useSubmitAnswer(\n    publicMeeting?.id,\n    publicMeeting?.owner\n  );\n  const signedIn: boolean = useAppSelector((state) => state.auth.signedIn);\n  const userId: string | undefined = useAppSelector(\n    (state) => state.auth.user?.id\n  );\n\n  const [overallStars, setOverallStars] = useState<number | null>(3);\n  const [paceStars, setPaceStars] = useState<number | null>(null);\n  const [contentStars, setContentStars] = useState<number | null>(null);\n\n  return !meetingLoading ? (\n    !publicMeeting ? (\n      <NotFound />\n    ) : (\n      <Container>\n        <Box px={[0, 4, 8, 16]}>\n          {userId === publicMeeting.owner ? (\n            <Alert severity=\"warning\">\n              <Typography variant=\"body1\">\n                <strong>You cannot give yourself feedback!</strong>\n              </Typography>\n            </Alert>\n          ) : !submitted ? (\n            <>\n              <Box mb={2}>\n                <Error />\n                <Typography variant=\"h1\">Give Feedback</Typography>\n                <Typography variant=\"h5\">\n                  for the presentation <strong>{publicMeeting?.name}</strong>{\" \"}\n                  which has just ended{\" \"}\n                  <strong>\n                    {formatDistanceToNow(new Date(publicMeeting?.stoppedAt!), {\n                      addSuffix: true,\n                    })}\n                  </strong>\n                </Typography>\n              </Box>\n              {!expired ? (\n                <>\n                  <Box mb={3}>\n                    <Question\n                      name=\"overallStars\"\n                      stars={overallStars}\n                      onChange={(event, newValue) => {\n                        setOverallStars(newValue);\n                      }}\n                      question=\"How do you rate the overall experience?\"\n                      required={true}\n                    />\n                  </Box>\n                  <Box mb={3}>\n                    <Question\n                      name=\"paceStars\"\n                      stars={paceStars}\n                      onChange={(event, newValue) => {\n                        setPaceStars(newValue);\n                      }}\n                      question=\"Was the speaker's pace right for you?\"\n                      required={false}\n                    />\n                  </Box>\n                  <Box mb={3}>\n                    <Question\n                      name=\"contentStars\"\n                      stars={contentStars}\n                      onChange={(event, newValue) => {\n                        setContentStars(newValue);\n                      }}\n                      question=\"Was the content useful?\"\n                      required={false}\n                    />\n                  </Box>\n                  <Box mb={2}>\n                    <Button\n                      disabled={!overallStars || submitLoading}\n                      endIcon={<Send />}\n                      variant=\"contained\"\n                      color=\"primary\"\n                      onClick={() =>\n                        submitAnswer(overallStars!, paceStars, contentStars)\n                      }\n                    >\n                      Submit\n                    </Button>\n                  </Box>\n                  <Box>\n                    <Alert severity=\"info\" icon={<Security />}>\n                      <AlertTitle>Your feedback is anonymous</AlertTitle>\n                      <Typography variant=\"body1\">\n                        We do not send any information related to your identity.{\" \"}\n                        {signedIn &&\n                          \"Feel free to logout if you feel safer then.\"}\n                      </Typography>\n                    </Alert>\n                  </Box>\n                </>\n              ) : (\n                <Alert severity=\"warning\">\n                  <AlertTitle>This link is expired</AlertTitle>\n                  <Typography variant=\"body1\">\n                    You cannot give feedback anymore as the expiration time for\n                    this survey is <strong>{EXPIRATION_MINUTES} minutes</strong>\n                    .\n                  </Typography>\n                </Alert>\n              )}\n            </>\n          ) : (\n            <Box\n              height={300}\n              mt={4}\n              display=\"flex\"\n              flexDirection=\"column\"\n              alignItems=\"center\"\n              justifyContent=\"center\"\n              textAlign=\"center\"\n            >\n              <Typography variant=\"h1\">\n                <Box display=\"flex\">\n                  <Box>Thank you</Box>\n                  <Box color={red[500]} ml={2}>\n                    <Favorite fontSize=\"inherit\" />\n                  </Box>\n                </Box>\n              </Typography>\n              <Typography variant=\"subtitle1\">\n                You can close this page now.\n              </Typography>\n            </Box>\n          )}\n        </Box>\n      </Container>\n    )\n  ) : null;\n}\n"]},"metadata":{},"sourceType":"module"}